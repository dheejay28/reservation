<ul id="reservation-list"></ul>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const now = new Date();
        document.getElementById('current-date-time').textContent = now.toLocaleString();
        displayReservations();
    });

    function displayReservations() {
        const reservations = JSON.parse(localStorage.getItem('reservations')) || [];
        const reservationList = document.getElementById('reservation-list');
        reservationList.innerHTML = '';

        reservations.forEach((reservation) => {
            const li = document.createElement('li');
            li.textContent = `Room: ${reservation.room}, Start Time: ${reservation.startTime}, End Time: ${reservation.endTime}, Course: ${reservation.course}, Section: ${reservation.section}, Year: ${reservation.year}`;

            // Check if admin is logged in
            const isAdmin = localStorage.getItem('isAdmin') === 'true';
            if (isAdmin) {
                li.textContent += `, Reservation Code: ${reservation.reservationCode}`;
                const removeButton = document.createElement('button');
                removeButton.textContent = 'Remove';
                removeButton.onclick = function() { removeReservation(reservation.reservationCode); };
                li.appendChild(removeButton);
            }

            reservationList.appendChild(li);
        });

        if (reservations.length === 0) {
            const li = document.createElement('li');
            li.textContent = 'No reservations found.';
            reservationList.appendChild(li);
        }
    }
    
    function removeReservation(code) {
        let reservations = JSON.parse(localStorage.getItem('reservations')) || [];
        reservations = reservations.filter(reservation => reservation.reservationCode !== code);
        localStorage.setItem('reservations', JSON.stringify(reservations)); // Update local storage
        displayReservations(); // Refresh displayed reservations
    }
</script>

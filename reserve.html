<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve Room</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="Logo" class="logo"> <!-- Replace with your logo image -->
        <h1>Reserve Room</h1>
        <p id="current-date-time"></p>

        <input type="text" id="room-number" placeholder="Room Number" required>
        <input type="time" id="start-time" required>
        <input type="time" id="end-time" required>
        <button onclick="reserveRoom()">Reserve Room</button>

        <button onclick="goHome()">Go Back</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            document.getElementById('current-date-time').textContent = now.toLocaleString();
        });

        function reserveRoom() {
            const roomNumber = document.getElementById('room-number').value;
            const startTime = document.getElementById('start-time').value;
            const endTime = document.getElementById('end-time').value;

            // Check if the room exists
            const rooms = JSON.parse(localStorage.getItem('rooms')) || [];
            if (!rooms.includes(roomNumber)) {
                alert('Room does not exist. Please select a valid room.');
                return;
            }

            // Check if the start time is before the end time
            if (startTime >= endTime) {
                alert('End time must be after start time.');
                return;
            }

            // Check for overlapping reservations
            const reservations = JSON.parse(localStorage.getItem('reservations')) || [];
            for (const reservation of reservations) {
                if (reservation.room === roomNumber) {
                    if (
                        (startTime >= reservation.startTime && startTime < reservation.endTime) ||
                        (endTime > reservation.startTime && endTime <= reservation.endTime) ||
                        (startTime <= reservation.startTime && endTime >= reservation.endTime)
                    ) {
                        alert('The room is already reserved for the selected time.');
                        return;
                    }
                }
            }

            // If everything is okay, proceed to save the reservation
            const reservationCode = Date.now(); // Unique reservation code
            reservations.push({
                room: roomNumber,
                startTime: startTime,
                endTime: endTime,
                code: reservationCode
            });
            localStorage.setItem('reservations', JSON.stringify(reservations));
            alert(`Reservation successful! Your reservation code is: ${reservationCode}`);

            // Clear inputs
            document.getElementById('room-number').value = '';
            document.getElementById('start-time').value = '';
            document.getElementById('end-time').value = '';
        }

        function goHome() {
            window.location.href = 'index.html'; // Change this to your homepage if it's named differently
        }
    </script>
</body>
</html>

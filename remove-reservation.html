<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Reservations</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Reserved Rooms</h1>
        <ul id="reservation-list"></ul>
        <button onclick="goHome()">Go Back</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            displayReservations();
        });

        function displayReservations() {
            const reservationList = document.getElementById('reservation-list');
            const reservations = JSON.parse(localStorage.getItem('reservations')) || [];

            // Check if admin is logged in
            const isAdmin = localStorage.getItem('isAdmin');

            reservations.forEach((reservation, index) => {
                const listItem = document.createElement('li');
                listItem.textContent = `Room: ${reservation.room}, Start: ${reservation.startTime}, End: ${reservation.endTime}, Course: ${reservation.course}, Section: ${reservation.section}`;

                if (isAdmin === 'true') {
                    // Only show remove button for admin
                    const removeButton = document.createElement('button');
                    removeButton.textContent = 'Remove';
                    removeButton.onclick = () => removeReservation(index);
                    listItem.appendChild(removeButton);
                }

                reservationList.appendChild(listItem);
            });
        }

        function removeReservation(index) {
            const reservations = JSON.parse(localStorage.getItem('reservations')) || [];
            reservations.splice(index, 1);  // Remove the reservation
            localStorage.setItem('reservations', JSON.stringify(reservations));  // Update localStorage
            alert('Reservation removed successfully!');
            window.location.reload();  // Reload the page to refresh the reservation list
        }

        function goHome() {
            window.location.href = 'index.html';  // Redirect to the homepage
        }
    </script>
</body>
</html>
